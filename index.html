
<!DOCTYPE html>
<html>
<head>


<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css" integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw==" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js" integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA==" crossorigin=""></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>
<style>
#map {
    position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
        z-index:0 ;
}
#title {
                position: fixed;
                margin-top: 0;
                top: 10px;
                left: 35px;
                font-size: 2.15em;
                font-family: "Lora", serif;
                letter-spacing: .04em;
                padding: 10px 15px;
                background-color: rgba(255, 255, 255, 0.5);
                border: 1px solid grey;
                border-radius: 3px;
                z-index: 2;                
            }
#background{
    position: fixed;
                margin-top: 0;
                top: 1px;
                left: 15px;
                font-size: 1.8em;
                font-family: "Lora", serif;
                letter-spacing: .04em;
                padding: 10px 15px;
                background-color: rgba(255, 255, 255, .75);
                border: 1px solid grey;
                border-radius: 5px;
                z-index: 1;
                width:320px;
                height:492.5px ;
}
.btn {
    position: absolute;
    color:rgb(0, 0, 0);
                margin-top: 0;
                font-size: 1em;
                font-family: "Lora", serif;
                text-align: center;
                letter-spacing: .04em;
                padding: 5px;
                background-color: rgba(255, 255, 255, .7);
                border: 1px solid grey;
                border-radius: 5px;
                z-index: 3;
                width:142px;               
}
.ApLeiChau{ top: 80px;
            left: 10px;}
.Butterfly {top: 80px;
            left: 170px;}
.CheungKwai {top: 115px;
            left: 10px;}
.CheungShan{top:115px;
            left: 170px;}
.ChoiYuen{  top: 150px;
            left: 10px;}
.ChukYuenSouth{  top: 150px;
            left: 170px;}
.KwaiFong{  top: 185px;
            left: 10px;}
.KwongFuk{  top: 202.5px;
            left: 170px;}
.LaiKok{  top: 220px;
            left: 10px;}
.LokFu{     top: 237.5px;
            left: 170px;}
.WongTaiSin{top: 255px;
            left: 10px;}
.LungHang{  top: 272.5px;
            left: 170px;}
.MeiLam{  top: 307.5px;
            left: 10px;}
.OnTing {    top: 307.5px;
            left: 170px;}
.ShekLei{  top: 342.5px;
            left: 10px;}
.ShekWaiKok{  top: 342.5px;
            left: 170px;}
.ShuiPinWai{  top: 377.5px;
            left: 10px;}
.ShunTin{   top: 377.5px;
            left: 170px;}
.TaiHangTung{  top: 412.5px;
            left: 10px;} 
.TaiWoHau{  top: 412.5px;
            left: 170px;}
.WuKing{  top: 465px;
          left: 10px;}
.YauOi  {  top: 447.5px;
          left: 170px;}
   
/*customize Leaflet style */
.popupCustom .leaflet-popup-tip,
.popupCustom .leaflet-popup-content-wrapper{
    background-color: rgba(255, 255, 255, 1);
    border:  1px solid rgba(255, 255, 255, 0);    
}



/*sidepanel style */
.sidepanel {

  height:450px; /* Specify a height */
  width: 0; /* 0 width - change this with JavaScript */
  position: fixed; /* Stay in place */
  z-index: 3; /* Stay on top */
  top: 0;
  left: 5;
  background-color: rgba(255, 255, 255, 0.76); /* Black*/
  overflow-x: hidden; /* Disable horizontal scroll */
  padding-top: 60px; /* Place content 60px from the top */
  transition: 0.5s; /* 0.5 second transition effect to slide in the sidepanel */
}
/* Style the button that is used to open the sidepanel */
.openbtn{
                position: fixed;
                margin-top: 0;
                top: 5px;
                left: 15px;
                font-size: 2.2em;
                font-family: "Lora", serif;
                text-align: center;
                letter-spacing: .04em;
                padding: 10px 15px;
                background-color: rgba(255, 255, 255, 0.842);
                border: 1px solid grey;
                border-radius: 3px;
                z-index: 3; 
                width:320px;               
            }
.sidepanel .closebtn {
  position: absolute;
  background: url(collapse_icon);
  top: 0;
  right: 10px;
  font-size: 36px;
  margin-left: 50px;
  z-index: 4;
  color:rgba(0, 0, 0, 0.534);
}
.sidepanel .closebtn:hover {
    font-size: 40px;
    color:black;
}
/* When you mouse over the navigation links, change their color */
.openbtn:hover{
    font-weight: 600;
}

.btn:hover {
  font-size: 1.01em ;

}



</style>

</head>
<body>
    <!--
    <h1 id="background"> </h1>
    <h1 id="title">Estate PhotoView</h1>
    -->
    <div id="mySidepanel" class="sidepanel">
		<a class="closebtn" onclick="closeNav()">&times;</a>
        <a class="btn ApLeiChau" onclick="zoomtopoint(ApLeiChauEstatePoint,18,map)">ApLeiChau Estate</a>
        <a class="btn Butterfly" onclick="zoomtopoint(ButterflyEstatePoint,17,map)">Butterfly Estate</a>
        <a class="btn CheungKwai" onclick="zoomtopoint(CheungKwaiEstatePoint,17,map)">CheungKwai Estate</a>
        <a class="btn CheungShan" onclick="zoomtopoint(CheungShanEstatePoint,18,map)">CheungShan Estate</a>
        <a class="btn ChoiYuen" onclick="zoomtopoint(ChoiYuenEstatePoint,17,map)">ChoiYuen Estate</a>
        <a class="btn ChukYuenSouth" onclick="zoomtopoint(ChukYuenSouthEstatePoint,17,map)">ChukYuen(South) Estate</a>
        <a class="btn KwaiFong" onclick="zoomtopoint(KwaiFongEstatePoint,17,map)">KwaiFong Estate</a>
        <a class="btn KwongFuk" onclick="zoomtopoint(KwongFukEstatePoint,17,map)">KwongFuk Estate</a>
        <a class="btn LaiKok" onclick="zoomtopoint(LaiKokEstatePoint,17,map)">LaiKok Estate</a>
        <a class="btn LokFu" onclick="zoomtopoint(LokFuEstatePoint,17,map)">LokFu Estate</a>
        <a class="btn WongTaiSin" onclick="zoomtopoint(WongTaiSinEstatePoint,17,map)">Lower WongTaiSin (II) Estate</a>
        <a class="btn LungHang" onclick="zoomtopoint(LungHangEstatePoint,17,map)">LungHang Estate</a>
        <a class="btn MeiLam" onclick="zoomtopoint(MeiLamEstatePoint,17,map)">MeiLam Estate</a>
        <a class="btn OnTing" onclick="zoomtopoint(YauOiEstatePoint,17,map)">OnTing Estate</a>
        <a class="btn ShekLei" onclick="zoomtopoint(ShekLeiEstatePoint,17,map)">ShekLei(I) Estate</a>
        <a class="btn ShekWaiKok" onclick="zoomtopoint(ShekWaiKokEstatePoint,17,map)">ShekWaiKok Estate</a>
        <a class="btn ShuiPinWai" onclick="zoomtopoint(ShuiPinWaiEstatePoint,18,map)">ShuiPinWai Estate</a>
        <a class="btn ShunTin" onclick="zoomtopoint(ShunTinEstatePoint,17,map)">ShunTin Estate</a>
        <a class="btn TaiHangTung" onclick="zoomtopoint(TaiHangTungEstatePoint,17,map)">TaiHangTung Estate</a>
        <a class="btn TaiWoHau" onclick="zoomtopoint(TaiWoHauEstatePoint,17,map)">TaiWoHau Estate</a>
        <a class="btn WuKing" onclick="zoomtopoint(ButterflyEstatePoint,17,map)">WuKing Estate</a>
        <a class="btn YauOi" onclick="zoomtopoint(YauOiEstatePoint,17,map)">YauOi Estate</a>
    </div>
	  
	<button class="openbtn" onclick="openNav()">&#9776;List of Estates</button>
    
    
<div id='map'></div>

<script>
/* Set the width of the sidebar to 320px (show it) */
function openNav() {
  document.getElementById("mySidepanel").style.width = "360px";
}

/* Set the width of the sidebar to 0 (hide it) */
function closeNav() {
  document.getElementById("mySidepanel").style.width = "0";
}

var url = "Planter.geojson";
var url_points='photo_updated.geojson'
var panorama_url="panorama.geojson"
var collapse_icon='files/collapse.jpg'
var icon='files/cam_blue.png'
var panorama_icon='files/panorama.png'
// initialize map
var defaultcentrepoint=[22.340687, 114.191012];
var map = L.map('map',{zoomControl:false}).setView(defaultcentrepoint, 16);

var osm=new L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{ 
attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);

//var base = new L.StamenTileLayer("watercolor").addTo(map);
//Check out http://maps.stamen.com/#watercolor/12/37.7706/-122.3782
var popup=L.popup({maxWidth:null});
//photo ico settings

var photoIcon=L.icon({
    iconUrl:icon,
    iconSize:[16,16],
    iconAnchor:[0,0],
    popupAnchor:[0,0]

})

var panoramaIcon=L.icon({
    iconUrl:panorama_icon,
    iconSize:[30,22],
    iconAnchor:[0,0],
    popupAnchor:[0,0]
})
//zoom to function
var estate_zoomlevel=16



var ApLeiChauEstatePoint=[22.244551, 114.150515]
var ButterflyEstatePoint=[22.376210, 113.963798]
var CheungKwaiEstatePoint=[22.213069, 114.025586]
var CheungShanEstatePoint=[22.378467, 114.130155]
var ChoiYuenEstatePoint=[22.501032, 114.125711]
var ChukYuenSouthEstatePoint=[22.344383, 114.192149]
var KwaiFongEstatePoint=[22.359459, 114.129702]
var KwongFukEstatePoint=[22.448089, 114.173833]
var LaiKokEstatePoint=[22.332580, 114.157471]
var LokFuEstatePoint=[22.337675, 114.188075]
var WongTaiSinEstatePoint=[22.340367, 114.193612]
var LungHangEstatePoint=[22.366486, 114.178850]
var MeiLamEstatePoint=[22.378423, 114.176467]
var YauOiEstatePoint=[22.387733, 113.975869]
var ShekLeiEstatePoint=[22.362921, 114.138640]
var ShekWaiKokEstatePoint=[22.375187, 114.124830]
var ShuiPinWaiEstatePoint=[22.445571, 114.020183]
var ShunTinEstatePoint=[22.325563, 114.226497]
var TaiHangTungEstatePoint=[22.331597, 114.170848]
var TaiWoHauEstatePoint=[22.368235, 114.124605]



function zoomtopoint(point,zoomlevel,map){
    map.setView(point,zoomlevel)
}
//custom popup options
var customOptions=
    {
    'maxWidth':'1020',
    'className':'popupCustom'
    }
/////////////////////////////////////////////////////////////////////

document.querySelector(".leaflet-popup-pane").addEventListener("load", function (event) {
  var tagName = event.target.tagName,
      popup = map._popup; // Currently open popup, if any.

  if (tagName === "IMG" && popup) {
    popup.update();
  }
}, true); // Capture the load event, because it does not bubble.

// points popup image activity
function forEachFeature(feature, layer) {

	var popupContent = '<img src="ThumbPhoto/'+feature.properties.Image+'" >'
    popupContent.onload=function(){layer.openPopup();};

	layer.bindPopup(popupContent,customOptions);
};
// panorama popup
function forEachPanoramaFeature(feature, layer) {

var popupContent = '<img src="PanoramaPhoto/'+feature.properties.Image+'" >'

layer.bindPopup(popupContent,customOptions);
};
// polygon popup estatename
function PolygonforEachFeature(feature, layer) {

    var popupContent = feature.properties.EstateName

    layer.bindPopup(popupContent);
};

var polygonstyle={
    'color':'green',
    //'fillcolor':'green',
    'weight':1.5,
    'opacity':0.7,

}
///geojson process
var greenspace = L.geoJSON(null, {
	style: polygonstyle,
    onEachFeature:PolygonforEachFeature
		
});
var photos = L.geoJSON(null, {
	onEachFeature: forEachFeature, 
	pointToLayer: function (feature, latlng) {
		return L.marker(latlng, {icon:photoIcon
		});
	}
});
var panorama=L.geoJSON(null,{
    onEachFeature:forEachPanoramaFeature,
    pointToLayer:function (feature, latlng) {
		return L.marker(latlng, {icon:panoramaIcon
		});
	}
});
// Get GeoJSON data and create features.
jQuery.getJSON(url, function(data) {
greenspace.addData(data);
});


jQuery.getJSON(url_points, function(data) {
photos.addData(data);
});

$.getJSON(panorama_url, function(data) {
panorama.addData(data);
});
// set initial display layer

panorama.addTo(map);
photos.addTo(map);

/////////////////////////////////////////


// Get GeoJSON data and create features.


// layer control #add layer control button
var baseMaps= {
	"Open Street Map":osm,	
	}


var overlay= {
    "PanoramaView":panorama,
	"Observation Points": photos,
    "Greenspace":greenspace
	}

L.control.layers(baseMaps, overlay).addTo(map);  
// END layer control

//scalebar
L.control.scale().addTo(map);
L.control.zoom({position:'bottomright'}).addTo(map)

</script>
</body>
</html>